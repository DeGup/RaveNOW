<!DOCTYPE html>
<html lang="en">
<head th:insert="fragments/head :: head"></head>
<body>
<a th:insert="fragments/head :: navbar"></a>
<form th:action="@{/organisatie/create-rave}" method="post" th:object="${rave}">
    <span><input id="naam" class="blue" size="12" placeholder="Naam" required type="text" th:field="*{name}"/></span>
    <input id="datum" placeholder="datum" required type="datetime-local" th:field="*{datum}"/>
    <br>
    <input id="omschrijving" class="blue" size="12" placeholder="omschrijving" required type="text" th:field="*{omschrijving}"/>
    <br>
    <input id="tags" placeholder="Tags" class="blue" required type="text" th:field="*{tags}"/>
    <input id="latitude" required type="hidden" th:field="*{latitude}"/>
    <input id="longitude" required type="hidden" th:field="*{longitude}"/>
    <input type="submit" value="Opslaan" class="teletext.yellow bluebg">
</form>

<div id="map"></div>
<br>
<p th:insert="fragments/head :: raves"></p>
</body>
<script>
    // Get element references
    // Initialize locationPicker plugin
    var lp = new locationPicker('map', {
        setCurrentPosition: true, // You can omit this, defaults to true
    }, {
        zoom: 15 // You can set any google map options here, zoom defaults to 15
    });

    // Listen to button onclick event
    // confirmBtn.onclick = function () {
    //     // Get current location and show it in HTML
    //     const location = lp.getMarkerPosition();
    //     const long = document.getElementById("longitude");
    //     const lat = document.getElementById("latitude");
    //
    //     onClickPositionView.innerHTML = 'De gekozen locatie is ' + location.lat + ',' + location.lng;
    //     long.value = location.lng;
    //     lat.value = location.lat;
    // };

    google.maps.event.addListener(lp.map, 'idle', function (event) {
        // Get current location and show it in HTML
        const location = lp.getMarkerPosition();
        const long = document.getElementById("longitude");
        const lat = document.getElementById("latitude");

        onClickPositionView.innerHTML = 'De gekozen locatie is ' + location.lat + ',' + location.lng;
        long.value = location.lng;
        lat.value = location.lat;
    });
</script>
</html>